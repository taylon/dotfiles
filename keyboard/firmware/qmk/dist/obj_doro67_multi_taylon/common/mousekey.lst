   1               		.file	"mousekey.c"
   2               	__SP_H__ = 0x3e
   3               	__SP_L__ = 0x3d
   4               	__SREG__ = 0x3f
   5               	__tmp_reg__ = 0
   6               	__zero_reg__ = 1
   7               		.text
   8               	.Ltext0:
   9               		.cfi_sections	.debug_frame
  10               		.section	.text.move_unit,"ax",@progbits
  12               	move_unit:
  13               	.LFB3:
  14               		.file 1 "tmk_core/common/mousekey.c"
   1:tmk_core/common/mousekey.c **** /*
   2:tmk_core/common/mousekey.c **** Copyright 2011 Jun Wako <wakojun@gmail.com>
   3:tmk_core/common/mousekey.c **** 
   4:tmk_core/common/mousekey.c **** This program is free software: you can redistribute it and/or modify
   5:tmk_core/common/mousekey.c **** it under the terms of the GNU General Public License as published by
   6:tmk_core/common/mousekey.c **** the Free Software Foundation, either version 2 of the License, or
   7:tmk_core/common/mousekey.c **** (at your option) any later version.
   8:tmk_core/common/mousekey.c **** 
   9:tmk_core/common/mousekey.c **** This program is distributed in the hope that it will be useful,
  10:tmk_core/common/mousekey.c **** but WITHOUT ANY WARRANTY; without even the implied warranty of
  11:tmk_core/common/mousekey.c **** MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  12:tmk_core/common/mousekey.c **** GNU General Public License for more details.
  13:tmk_core/common/mousekey.c **** 
  14:tmk_core/common/mousekey.c **** You should have received a copy of the GNU General Public License
  15:tmk_core/common/mousekey.c **** along with this program.  If not, see <http://www.gnu.org/licenses/>.
  16:tmk_core/common/mousekey.c **** */
  17:tmk_core/common/mousekey.c **** 
  18:tmk_core/common/mousekey.c **** #include <stdint.h>
  19:tmk_core/common/mousekey.c **** #include "keycode.h"
  20:tmk_core/common/mousekey.c **** #include "host.h"
  21:tmk_core/common/mousekey.c **** #include "timer.h"
  22:tmk_core/common/mousekey.c **** #include "print.h"
  23:tmk_core/common/mousekey.c **** #include "debug.h"
  24:tmk_core/common/mousekey.c **** #include "mousekey.h"
  25:tmk_core/common/mousekey.c **** 
  26:tmk_core/common/mousekey.c **** inline int8_t times_inv_sqrt2(int8_t x) {
  27:tmk_core/common/mousekey.c ****     // 181/256 is pretty close to 1/sqrt(2)
  28:tmk_core/common/mousekey.c ****     // 0.70703125                 0.707106781
  29:tmk_core/common/mousekey.c ****     // 1 too small for x=99 and x=198
  30:tmk_core/common/mousekey.c ****     // This ends up being a mult and discard lower 8 bits
  31:tmk_core/common/mousekey.c ****     return (x * 181) >> 8;
  32:tmk_core/common/mousekey.c **** }
  33:tmk_core/common/mousekey.c **** 
  34:tmk_core/common/mousekey.c **** static report_mouse_t mouse_report = {0};
  35:tmk_core/common/mousekey.c **** static void           mousekey_debug(void);
  36:tmk_core/common/mousekey.c **** static uint8_t        mousekey_accel  = 0;
  37:tmk_core/common/mousekey.c **** static uint8_t        mousekey_repeat = 0;
  38:tmk_core/common/mousekey.c **** static uint16_t       last_timer      = 0;
  39:tmk_core/common/mousekey.c **** 
  40:tmk_core/common/mousekey.c **** #ifndef MK_3_SPEED
  41:tmk_core/common/mousekey.c **** 
  42:tmk_core/common/mousekey.c **** /*
  43:tmk_core/common/mousekey.c ****  * Mouse keys  acceleration algorithm
  44:tmk_core/common/mousekey.c ****  *  http://en.wikipedia.org/wiki/Mouse_keys
  45:tmk_core/common/mousekey.c ****  *
  46:tmk_core/common/mousekey.c ****  *  speed = delta * max_speed * (repeat / time_to_max)**((1000+curve)/1000)
  47:tmk_core/common/mousekey.c ****  */
  48:tmk_core/common/mousekey.c **** /* milliseconds between the initial key press and first repeated motion event (0-2550) */
  49:tmk_core/common/mousekey.c **** uint8_t mk_delay = MOUSEKEY_DELAY / 10;
  50:tmk_core/common/mousekey.c **** /* milliseconds between repeated motion events (0-255) */
  51:tmk_core/common/mousekey.c **** uint8_t mk_interval = MOUSEKEY_INTERVAL;
  52:tmk_core/common/mousekey.c **** /* steady speed (in action_delta units) applied each event (0-255) */
  53:tmk_core/common/mousekey.c **** uint8_t mk_max_speed = MOUSEKEY_MAX_SPEED;
  54:tmk_core/common/mousekey.c **** /* number of events (count) accelerating to steady speed (0-255) */
  55:tmk_core/common/mousekey.c **** uint8_t mk_time_to_max = MOUSEKEY_TIME_TO_MAX;
  56:tmk_core/common/mousekey.c **** /* ramp used to reach maximum pointer speed (NOT SUPPORTED) */
  57:tmk_core/common/mousekey.c **** // int8_t mk_curve = 0;
  58:tmk_core/common/mousekey.c **** /* wheel params */
  59:tmk_core/common/mousekey.c **** uint8_t mk_wheel_max_speed   = MOUSEKEY_WHEEL_MAX_SPEED;
  60:tmk_core/common/mousekey.c **** uint8_t mk_wheel_time_to_max = MOUSEKEY_WHEEL_TIME_TO_MAX;
  61:tmk_core/common/mousekey.c **** 
  62:tmk_core/common/mousekey.c **** static uint8_t move_unit(void) {
  15               		.loc 1 62 0
  16               		.cfi_startproc
  17               	/* prologue: function */
  18               	/* frame size = 0 */
  19               	/* stack size = 0 */
  20               	.L__stack_usage = 0
  63:tmk_core/common/mousekey.c ****     uint16_t unit;
  64:tmk_core/common/mousekey.c ****     if (mousekey_accel & (1 << 0)) {
  21               		.loc 1 64 0
  22 0000 8091 0000 		lds r24,mousekey_accel
  23 0004 80FF      		sbrs r24,0
  24 0006 00C0      		rjmp .L2
  65:tmk_core/common/mousekey.c ****         unit = (MOUSEKEY_MOVE_DELTA * mk_max_speed) / 4;
  25               		.loc 1 65 0
  26 0008 6091 0000 		lds r22,mk_max_speed
  27 000c 85E0      		ldi r24,lo8(5)
  28 000e 689F      		mul r22,r24
  29 0010 B001      		movw r22,r0
  30 0012 1124      		clr __zero_reg__
  31 0014 7595      		asr r23
  32 0016 6795      		ror r22
  33 0018 7595      		asr r23
  34 001a 6795      		ror r22
  35               	.LVL0:
  36 001c 00C0      		rjmp .L3
  37               	.LVL1:
  38               	.L2:
  66:tmk_core/common/mousekey.c ****     } else if (mousekey_accel & (1 << 1)) {
  39               		.loc 1 66 0
  40 001e 81FF      		sbrs r24,1
  41 0020 00C0      		rjmp .L4
  67:tmk_core/common/mousekey.c ****         unit = (MOUSEKEY_MOVE_DELTA * mk_max_speed) / 2;
  42               		.loc 1 67 0
  43 0022 6091 0000 		lds r22,mk_max_speed
  44 0026 85E0      		ldi r24,lo8(5)
  45 0028 689F      		mul r22,r24
  46 002a B001      		movw r22,r0
  47 002c 1124      		clr __zero_reg__
  48 002e 7595      		asr r23
  49 0030 6795      		ror r22
  50               	.LVL2:
  51 0032 00C0      		rjmp .L3
  52               	.LVL3:
  53               	.L4:
  68:tmk_core/common/mousekey.c ****     } else if (mousekey_accel & (1 << 2)) {
  54               		.loc 1 68 0
  55 0034 82FF      		sbrs r24,2
  56 0036 00C0      		rjmp .L5
  57               	.L7:
  69:tmk_core/common/mousekey.c ****         unit = (MOUSEKEY_MOVE_DELTA * mk_max_speed);
  58               		.loc 1 69 0
  59 0038 6091 0000 		lds r22,mk_max_speed
  60 003c 85E0      		ldi r24,lo8(5)
  61 003e 689F      		mul r22,r24
  62 0040 B001      		movw r22,r0
  63 0042 1124      		clr __zero_reg__
  64               	.LVL4:
  65 0044 00C0      		rjmp .L3
  66               	.LVL5:
  67               	.L5:
  70:tmk_core/common/mousekey.c ****     } else if (mousekey_repeat == 0) {
  68               		.loc 1 70 0
  69 0046 9091 0000 		lds r25,mousekey_repeat
  70 004a 9923      		tst r25
  71 004c 01F0      		breq .L9
  71:tmk_core/common/mousekey.c ****         unit = MOUSEKEY_MOVE_DELTA;
  72:tmk_core/common/mousekey.c ****     } else if (mousekey_repeat >= mk_time_to_max) {
  72               		.loc 1 72 0
  73 004e 6091 0000 		lds r22,mk_time_to_max
  74 0052 9617      		cp r25,r22
  75 0054 00F4      		brsh .L7
  73:tmk_core/common/mousekey.c ****         unit = MOUSEKEY_MOVE_DELTA * mk_max_speed;
  74:tmk_core/common/mousekey.c ****     } else {
  75:tmk_core/common/mousekey.c ****         unit = (MOUSEKEY_MOVE_DELTA * mk_max_speed * mousekey_repeat) / mk_time_to_max;
  76               		.loc 1 75 0
  77 0056 2091 0000 		lds r18,mk_max_speed
  78 005a 85E0      		ldi r24,lo8(5)
  79 005c 289F      		mul r18,r24
  80 005e 9001      		movw r18,r0
  81 0060 1124      		clr __zero_reg__
  82 0062 929F      		mul r25,r18
  83 0064 A001      		movw r20,r0
  84 0066 939F      		mul r25,r19
  85 0068 500D      		add r21,r0
  86 006a 1124      		clr __zero_reg__
  87 006c 70E0      		ldi r23,0
  88 006e CA01      		movw r24,r20
  89 0070 0E94 0000 		call __divmodhi4
  90               	.LVL6:
  91               	.L3:
  76:tmk_core/common/mousekey.c ****     }
  77:tmk_core/common/mousekey.c ****     return (unit > MOUSEKEY_MOVE_MAX ? MOUSEKEY_MOVE_MAX : (unit == 0 ? 1 : unit));
  92               		.loc 1 77 0
  93 0074 6038      		cpi r22,-128
  94 0076 7105      		cpc r23,__zero_reg__
  95 0078 00F4      		brsh .L10
  96               		.loc 1 77 0 is_stmt 0 discriminator 1
  97 007a 6115      		cp r22,__zero_reg__
  98 007c 7105      		cpc r23,__zero_reg__
  99 007e 01F0      		breq .L11
 100 0080 00C0      		rjmp .L6
 101               	.LVL7:
 102               	.L9:
  71:tmk_core/common/mousekey.c ****     } else if (mousekey_repeat >= mk_time_to_max) {
 103               		.loc 1 71 0 is_stmt 1
 104 0082 65E0      		ldi r22,lo8(5)
 105 0084 70E0      		ldi r23,0
 106               	.L6:
 107               		.loc 1 77 0 discriminator 3
 108 0086 862F      		mov r24,r22
 109 0088 0895      		ret
 110               	.LVL8:
 111               	.L10:
 112               		.loc 1 77 0 is_stmt 0
 113 008a 8FE7      		ldi r24,lo8(127)
 114 008c 0895      		ret
 115               	.L11:
 116 008e 81E0      		ldi r24,lo8(1)
  78:tmk_core/common/mousekey.c **** }
 117               		.loc 1 78 0 is_stmt 1
 118 0090 0895      		ret
 119               		.cfi_endproc
 120               	.LFE3:
 122               		.section	.text.wheel_unit,"ax",@progbits
 124               	wheel_unit:
 125               	.LFB4:
  79:tmk_core/common/mousekey.c **** 
  80:tmk_core/common/mousekey.c **** static uint8_t wheel_unit(void) {
 126               		.loc 1 80 0
 127               		.cfi_startproc
 128               	/* prologue: function */
 129               	/* frame size = 0 */
 130               	/* stack size = 0 */
 131               	.L__stack_usage = 0
  81:tmk_core/common/mousekey.c ****     uint16_t unit;
  82:tmk_core/common/mousekey.c ****     if (mousekey_accel & (1 << 0)) {
 132               		.loc 1 82 0
 133 0000 8091 0000 		lds r24,mousekey_accel
 134 0004 80FF      		sbrs r24,0
 135 0006 00C0      		rjmp .L14
  83:tmk_core/common/mousekey.c ****         unit = (MOUSEKEY_WHEEL_DELTA * mk_wheel_max_speed) / 4;
 136               		.loc 1 83 0
 137 0008 6091 0000 		lds r22,mk_wheel_max_speed
 138 000c 70E0      		ldi r23,0
 139 000e 7595      		asr r23
 140 0010 6795      		ror r22
 141 0012 7595      		asr r23
 142 0014 6795      		ror r22
 143               	.LVL9:
 144 0016 00C0      		rjmp .L21
 145               	.LVL10:
 146               	.L14:
  84:tmk_core/common/mousekey.c ****     } else if (mousekey_accel & (1 << 1)) {
 147               		.loc 1 84 0
 148 0018 81FF      		sbrs r24,1
 149 001a 00C0      		rjmp .L16
  85:tmk_core/common/mousekey.c ****         unit = (MOUSEKEY_WHEEL_DELTA * mk_wheel_max_speed) / 2;
 150               		.loc 1 85 0
 151 001c 6091 0000 		lds r22,mk_wheel_max_speed
 152 0020 70E0      		ldi r23,0
 153 0022 7595      		asr r23
 154 0024 6795      		ror r22
 155               	.LVL11:
 156 0026 00C0      		rjmp .L21
 157               	.LVL12:
 158               	.L16:
  86:tmk_core/common/mousekey.c ****     } else if (mousekey_accel & (1 << 2)) {
 159               		.loc 1 86 0
 160 0028 82FF      		sbrs r24,2
 161 002a 00C0      		rjmp .L17
 162               	.L19:
  87:tmk_core/common/mousekey.c ****         unit = (MOUSEKEY_WHEEL_DELTA * mk_wheel_max_speed);
 163               		.loc 1 87 0
 164 002c 6091 0000 		lds r22,mk_wheel_max_speed
 165 0030 70E0      		ldi r23,0
 166               	.LVL13:
 167 0032 00C0      		rjmp .L18
 168               	.LVL14:
 169               	.L17:
  88:tmk_core/common/mousekey.c ****     } else if (mousekey_repeat == 0) {
 170               		.loc 1 88 0
 171 0034 9091 0000 		lds r25,mousekey_repeat
 172 0038 9923      		tst r25
 173 003a 01F0      		breq .L22
  89:tmk_core/common/mousekey.c ****         unit = MOUSEKEY_WHEEL_DELTA;
  90:tmk_core/common/mousekey.c ****     } else if (mousekey_repeat >= mk_wheel_time_to_max) {
 174               		.loc 1 90 0
 175 003c 6091 0000 		lds r22,mk_wheel_time_to_max
 176 0040 9617      		cp r25,r22
 177 0042 00F4      		brsh .L19
  91:tmk_core/common/mousekey.c ****         unit = MOUSEKEY_WHEEL_DELTA * mk_wheel_max_speed;
  92:tmk_core/common/mousekey.c ****     } else {
  93:tmk_core/common/mousekey.c ****         unit = (MOUSEKEY_WHEEL_DELTA * mk_wheel_max_speed * mousekey_repeat) / mk_wheel_time_to_max
 178               		.loc 1 93 0
 179 0044 8091 0000 		lds r24,mk_wheel_max_speed
 180 0048 899F      		mul r24,r25
 181 004a C001      		movw r24,r0
 182 004c 1124      		clr __zero_reg__
 183 004e 70E0      		ldi r23,0
 184 0050 0E94 0000 		call __divmodhi4
 185               	.LVL15:
 186               	.L18:
  94:tmk_core/common/mousekey.c ****     }
  95:tmk_core/common/mousekey.c ****     return (unit > MOUSEKEY_WHEEL_MAX ? MOUSEKEY_WHEEL_MAX : (unit == 0 ? 1 : unit));
 187               		.loc 1 95 0
 188 0054 6038      		cpi r22,-128
 189 0056 7105      		cpc r23,__zero_reg__
 190 0058 00F4      		brsh .L23
 191               	.LVL16:
 192               	.L21:
 193               		.loc 1 95 0 is_stmt 0 discriminator 1
 194 005a 6115      		cp r22,__zero_reg__
 195 005c 7105      		cpc r23,__zero_reg__
 196 005e 01F0      		breq .L24
 197               		.loc 1 95 0 discriminator 3
 198 0060 862F      		mov r24,r22
 199 0062 0895      		ret
 200               	.L23:
 201               		.loc 1 95 0
 202 0064 8FE7      		ldi r24,lo8(127)
 203 0066 0895      		ret
 204               	.L24:
 205 0068 81E0      		ldi r24,lo8(1)
 206 006a 0895      		ret
 207               	.LVL17:
 208               	.L22:
  89:tmk_core/common/mousekey.c ****     } else if (mousekey_repeat >= mk_wheel_time_to_max) {
 209               		.loc 1 89 0 is_stmt 1
 210 006c 61E0      		ldi r22,lo8(1)
 211 006e 70E0      		ldi r23,0
 212               	.LVL18:
 213 0070 00C0      		rjmp .L21
 214               		.cfi_endproc
 215               	.LFE4:
 217               		.section	.text.mousekey_on,"ax",@progbits
 218               	.global	mousekey_on
 220               	mousekey_on:
 221               	.LFB6:
  96:tmk_core/common/mousekey.c **** }
  97:tmk_core/common/mousekey.c **** 
  98:tmk_core/common/mousekey.c **** void mousekey_task(void) {
  99:tmk_core/common/mousekey.c ****     if (timer_elapsed(last_timer) < (mousekey_repeat ? mk_interval : mk_delay * 10)) {
 100:tmk_core/common/mousekey.c ****         return;
 101:tmk_core/common/mousekey.c ****     }
 102:tmk_core/common/mousekey.c ****     if (mouse_report.x == 0 && mouse_report.y == 0 && mouse_report.v == 0 && mouse_report.h == 0) {
 103:tmk_core/common/mousekey.c ****         return;
 104:tmk_core/common/mousekey.c ****     }
 105:tmk_core/common/mousekey.c ****     if (mousekey_repeat != UINT8_MAX) mousekey_repeat++;
 106:tmk_core/common/mousekey.c ****     if (mouse_report.x > 0) mouse_report.x = move_unit();
 107:tmk_core/common/mousekey.c ****     if (mouse_report.x < 0) mouse_report.x = move_unit() * -1;
 108:tmk_core/common/mousekey.c ****     if (mouse_report.y > 0) mouse_report.y = move_unit();
 109:tmk_core/common/mousekey.c ****     if (mouse_report.y < 0) mouse_report.y = move_unit() * -1;
 110:tmk_core/common/mousekey.c ****     /* diagonal move [1/sqrt(2)] */
 111:tmk_core/common/mousekey.c ****     if (mouse_report.x && mouse_report.y) {
 112:tmk_core/common/mousekey.c ****         mouse_report.x = times_inv_sqrt2(mouse_report.x);
 113:tmk_core/common/mousekey.c ****         if (mouse_report.x == 0) {
 114:tmk_core/common/mousekey.c ****             mouse_report.x = 1;
 115:tmk_core/common/mousekey.c ****         }
 116:tmk_core/common/mousekey.c ****         mouse_report.y = times_inv_sqrt2(mouse_report.y);
 117:tmk_core/common/mousekey.c ****         if (mouse_report.y == 0) {
 118:tmk_core/common/mousekey.c ****             mouse_report.y = 1;
 119:tmk_core/common/mousekey.c ****         }
 120:tmk_core/common/mousekey.c ****     }
 121:tmk_core/common/mousekey.c ****     if (mouse_report.v > 0) mouse_report.v = wheel_unit();
 122:tmk_core/common/mousekey.c ****     if (mouse_report.v < 0) mouse_report.v = wheel_unit() * -1;
 123:tmk_core/common/mousekey.c ****     if (mouse_report.h > 0) mouse_report.h = wheel_unit();
 124:tmk_core/common/mousekey.c ****     if (mouse_report.h < 0) mouse_report.h = wheel_unit() * -1;
 125:tmk_core/common/mousekey.c ****     mousekey_send();
 126:tmk_core/common/mousekey.c **** }
 127:tmk_core/common/mousekey.c **** 
 128:tmk_core/common/mousekey.c **** void mousekey_on(uint8_t code) {
 222               		.loc 1 128 0
 223               		.cfi_startproc
 224               	.LVL19:
 225               	/* prologue: function */
 226               	/* frame size = 0 */
 227               	/* stack size = 0 */
 228               	.L__stack_usage = 0
 129:tmk_core/common/mousekey.c ****     if (code == KC_MS_UP)
 229               		.loc 1 129 0
 230 0000 803F      		cpi r24,lo8(-16)
 231 0002 01F4      		brne .L27
 130:tmk_core/common/mousekey.c ****         mouse_report.y = move_unit() * -1;
 232               		.loc 1 130 0
 233 0004 0E94 0000 		call move_unit
 234               	.LVL20:
 235 0008 8195      		neg r24
 236 000a 00C0      		rjmp .L43
 237               	.LVL21:
 238               	.L27:
 131:tmk_core/common/mousekey.c ****     else if (code == KC_MS_DOWN)
 239               		.loc 1 131 0
 240 000c 813F      		cpi r24,lo8(-15)
 241 000e 01F4      		brne .L29
 132:tmk_core/common/mousekey.c ****         mouse_report.y = move_unit();
 242               		.loc 1 132 0
 243 0010 0E94 0000 		call move_unit
 244               	.LVL22:
 245               	.L43:
 246 0014 8093 0000 		sts mouse_report+3,r24
 247 0018 0895      		ret
 248               	.LVL23:
 249               	.L29:
 133:tmk_core/common/mousekey.c ****     else if (code == KC_MS_LEFT)
 250               		.loc 1 133 0
 251 001a 823F      		cpi r24,lo8(-14)
 252 001c 01F4      		brne .L30
 134:tmk_core/common/mousekey.c ****         mouse_report.x = move_unit() * -1;
 253               		.loc 1 134 0
 254 001e 0E94 0000 		call move_unit
 255               	.LVL24:
 256 0022 8195      		neg r24
 257 0024 00C0      		rjmp .L45
 258               	.LVL25:
 259               	.L30:
 135:tmk_core/common/mousekey.c ****     else if (code == KC_MS_RIGHT)
 260               		.loc 1 135 0
 261 0026 833F      		cpi r24,lo8(-13)
 262 0028 01F4      		brne .L31
 136:tmk_core/common/mousekey.c ****         mouse_report.x = move_unit();
 263               		.loc 1 136 0
 264 002a 0E94 0000 		call move_unit
 265               	.LVL26:
 266               	.L45:
 267 002e 8093 0000 		sts mouse_report+2,r24
 268 0032 0895      		ret
 269               	.LVL27:
 270               	.L31:
 137:tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_UP)
 271               		.loc 1 137 0
 272 0034 893F      		cpi r24,lo8(-7)
 273 0036 01F4      		brne .L32
 138:tmk_core/common/mousekey.c ****         mouse_report.v = wheel_unit();
 274               		.loc 1 138 0
 275 0038 0E94 0000 		call wheel_unit
 276               	.LVL28:
 277 003c 00C0      		rjmp .L47
 278               	.LVL29:
 279               	.L32:
 139:tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_DOWN)
 280               		.loc 1 139 0
 281 003e 8A3F      		cpi r24,lo8(-6)
 282 0040 01F4      		brne .L33
 140:tmk_core/common/mousekey.c ****         mouse_report.v = wheel_unit() * -1;
 283               		.loc 1 140 0
 284 0042 0E94 0000 		call wheel_unit
 285               	.LVL30:
 286 0046 8195      		neg r24
 287               	.L47:
 288 0048 8093 0000 		sts mouse_report+4,r24
 289 004c 0895      		ret
 290               	.LVL31:
 291               	.L33:
 141:tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_LEFT)
 292               		.loc 1 141 0
 293 004e 8B3F      		cpi r24,lo8(-5)
 294 0050 01F4      		brne .L34
 142:tmk_core/common/mousekey.c ****         mouse_report.h = wheel_unit() * -1;
 295               		.loc 1 142 0
 296 0052 0E94 0000 		call wheel_unit
 297               	.LVL32:
 298 0056 8195      		neg r24
 299 0058 00C0      		rjmp .L48
 300               	.LVL33:
 301               	.L34:
 143:tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_RIGHT)
 302               		.loc 1 143 0
 303 005a 8C3F      		cpi r24,lo8(-4)
 304 005c 01F4      		brne .L35
 144:tmk_core/common/mousekey.c ****         mouse_report.h = wheel_unit();
 305               		.loc 1 144 0
 306 005e 0E94 0000 		call wheel_unit
 307               	.LVL34:
 308               	.L48:
 309 0062 8093 0000 		sts mouse_report+5,r24
 310 0066 0895      		ret
 311               	.LVL35:
 312               	.L35:
 145:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN1)
 313               		.loc 1 145 0
 314 0068 843F      		cpi r24,lo8(-12)
 315 006a 01F4      		brne .L36
 146:tmk_core/common/mousekey.c ****         mouse_report.buttons |= MOUSE_BTN1;
 316               		.loc 1 146 0
 317 006c 8091 0000 		lds r24,mouse_report+1
 318               	.LVL36:
 319 0070 8160      		ori r24,lo8(1)
 320 0072 00C0      		rjmp .L46
 321               	.LVL37:
 322               	.L36:
 147:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN2)
 323               		.loc 1 147 0
 324 0074 853F      		cpi r24,lo8(-11)
 325 0076 01F4      		brne .L37
 148:tmk_core/common/mousekey.c ****         mouse_report.buttons |= MOUSE_BTN2;
 326               		.loc 1 148 0
 327 0078 8091 0000 		lds r24,mouse_report+1
 328               	.LVL38:
 329 007c 8260      		ori r24,lo8(2)
 330 007e 00C0      		rjmp .L46
 331               	.LVL39:
 332               	.L37:
 149:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN3)
 333               		.loc 1 149 0
 334 0080 863F      		cpi r24,lo8(-10)
 335 0082 01F4      		brne .L38
 150:tmk_core/common/mousekey.c ****         mouse_report.buttons |= MOUSE_BTN3;
 336               		.loc 1 150 0
 337 0084 8091 0000 		lds r24,mouse_report+1
 338               	.LVL40:
 339 0088 8460      		ori r24,lo8(4)
 340 008a 00C0      		rjmp .L46
 341               	.LVL41:
 342               	.L38:
 151:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN4)
 343               		.loc 1 151 0
 344 008c 873F      		cpi r24,lo8(-9)
 345 008e 01F4      		brne .L39
 152:tmk_core/common/mousekey.c ****         mouse_report.buttons |= MOUSE_BTN4;
 346               		.loc 1 152 0
 347 0090 8091 0000 		lds r24,mouse_report+1
 348               	.LVL42:
 349 0094 8860      		ori r24,lo8(8)
 350 0096 00C0      		rjmp .L46
 351               	.LVL43:
 352               	.L39:
 153:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN5)
 353               		.loc 1 153 0
 354 0098 883F      		cpi r24,lo8(-8)
 355 009a 01F4      		brne .L40
 154:tmk_core/common/mousekey.c ****         mouse_report.buttons |= MOUSE_BTN5;
 356               		.loc 1 154 0
 357 009c 8091 0000 		lds r24,mouse_report+1
 358               	.LVL44:
 359 00a0 8061      		ori r24,lo8(16)
 360               	.L46:
 361 00a2 8093 0000 		sts mouse_report+1,r24
 362 00a6 0895      		ret
 363               	.LVL45:
 364               	.L40:
 155:tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL0)
 365               		.loc 1 155 0
 366 00a8 8D3F      		cpi r24,lo8(-3)
 367 00aa 01F4      		brne .L41
 156:tmk_core/common/mousekey.c ****         mousekey_accel |= (1 << 0);
 368               		.loc 1 156 0
 369 00ac 8091 0000 		lds r24,mousekey_accel
 370               	.LVL46:
 371 00b0 8160      		ori r24,lo8(1)
 372 00b2 00C0      		rjmp .L44
 373               	.LVL47:
 374               	.L41:
 157:tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL1)
 375               		.loc 1 157 0
 376 00b4 8E3F      		cpi r24,lo8(-2)
 377 00b6 01F4      		brne .L42
 158:tmk_core/common/mousekey.c ****         mousekey_accel |= (1 << 1);
 378               		.loc 1 158 0
 379 00b8 8091 0000 		lds r24,mousekey_accel
 380               	.LVL48:
 381 00bc 8260      		ori r24,lo8(2)
 382 00be 00C0      		rjmp .L44
 383               	.LVL49:
 384               	.L42:
 159:tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL2)
 385               		.loc 1 159 0
 386 00c0 8F3F      		cpi r24,lo8(-1)
 387 00c2 01F4      		brne .L26
 160:tmk_core/common/mousekey.c ****         mousekey_accel |= (1 << 2);
 388               		.loc 1 160 0
 389 00c4 8091 0000 		lds r24,mousekey_accel
 390               	.LVL50:
 391 00c8 8460      		ori r24,lo8(4)
 392               	.L44:
 393 00ca 8093 0000 		sts mousekey_accel,r24
 394               	.L26:
 395 00ce 0895      		ret
 396               		.cfi_endproc
 397               	.LFE6:
 399               		.section	.text.mousekey_off,"ax",@progbits
 400               	.global	mousekey_off
 402               	mousekey_off:
 403               	.LFB7:
 161:tmk_core/common/mousekey.c **** }
 162:tmk_core/common/mousekey.c **** 
 163:tmk_core/common/mousekey.c **** void mousekey_off(uint8_t code) {
 404               		.loc 1 163 0
 405               		.cfi_startproc
 406               	.LVL51:
 407               	/* prologue: function */
 408               	/* frame size = 0 */
 409               	/* stack size = 0 */
 410               	.L__stack_usage = 0
 164:tmk_core/common/mousekey.c ****     if (code == KC_MS_UP && mouse_report.y < 0)
 411               		.loc 1 164 0
 412 0000 803F      		cpi r24,lo8(-16)
 413 0002 01F4      		brne .L50
 414               		.loc 1 164 0 is_stmt 0 discriminator 1
 415 0004 8091 0000 		lds r24,mouse_report+3
 416               	.LVL52:
 417 0008 87FF      		sbrs r24,7
 418 000a 00C0      		rjmp .L51
 419               	.L53:
 165:tmk_core/common/mousekey.c ****         mouse_report.y = 0;
 420               		.loc 1 165 0 is_stmt 1
 421 000c 1092 0000 		sts mouse_report+3,__zero_reg__
 422 0010 00C0      		rjmp .L51
 423               	.LVL53:
 424               	.L50:
 166:tmk_core/common/mousekey.c ****     else if (code == KC_MS_DOWN && mouse_report.y > 0)
 425               		.loc 1 166 0
 426 0012 813F      		cpi r24,lo8(-15)
 427 0014 01F4      		brne .L52
 428               		.loc 1 166 0 is_stmt 0 discriminator 1
 429 0016 8091 0000 		lds r24,mouse_report+3
 430               	.LVL54:
 431 001a 1816      		cp __zero_reg__,r24
 432 001c 04F0      		brlt .L53
 433 001e 00C0      		rjmp .L51
 434               	.LVL55:
 435               	.L52:
 436 0020 9091 0000 		lds r25,mouse_report+2
 167:tmk_core/common/mousekey.c ****         mouse_report.y = 0;
 168:tmk_core/common/mousekey.c ****     else if (code == KC_MS_LEFT && mouse_report.x < 0)
 437               		.loc 1 168 0 is_stmt 1
 438 0024 823F      		cpi r24,lo8(-14)
 439 0026 01F4      		brne .L54
 440               		.loc 1 168 0 is_stmt 0 discriminator 1
 441 0028 97FF      		sbrs r25,7
 442 002a 00C0      		rjmp .L51
 443               	.L56:
 169:tmk_core/common/mousekey.c ****         mouse_report.x = 0;
 444               		.loc 1 169 0 is_stmt 1
 445 002c 1092 0000 		sts mouse_report+2,__zero_reg__
 446 0030 00C0      		rjmp .L51
 447               	.L54:
 170:tmk_core/common/mousekey.c ****     else if (code == KC_MS_RIGHT && mouse_report.x > 0)
 448               		.loc 1 170 0
 449 0032 833F      		cpi r24,lo8(-13)
 450 0034 01F4      		brne .L55
 451               		.loc 1 170 0 is_stmt 0 discriminator 1
 452 0036 1916      		cp __zero_reg__,r25
 453 0038 04F0      		brlt .L56
 454 003a 00C0      		rjmp .L51
 455               	.L55:
 171:tmk_core/common/mousekey.c ****         mouse_report.x = 0;
 172:tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_UP && mouse_report.v > 0)
 456               		.loc 1 172 0 is_stmt 1
 457 003c 893F      		cpi r24,lo8(-7)
 458 003e 01F4      		brne .L57
 459               		.loc 1 172 0 is_stmt 0 discriminator 1
 460 0040 8091 0000 		lds r24,mouse_report+4
 461               	.LVL56:
 462 0044 1816      		cp __zero_reg__,r24
 463 0046 04F0      		brlt .+2
 464 0048 00C0      		rjmp .L51
 465               	.L59:
 173:tmk_core/common/mousekey.c ****         mouse_report.v = 0;
 466               		.loc 1 173 0 is_stmt 1
 467 004a 1092 0000 		sts mouse_report+4,__zero_reg__
 468 004e 00C0      		rjmp .L51
 469               	.LVL57:
 470               	.L57:
 174:tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_DOWN && mouse_report.v < 0)
 471               		.loc 1 174 0
 472 0050 8A3F      		cpi r24,lo8(-6)
 473 0052 01F4      		brne .L58
 474               		.loc 1 174 0 is_stmt 0 discriminator 1
 475 0054 8091 0000 		lds r24,mouse_report+4
 476               	.LVL58:
 477 0058 87FF      		sbrs r24,7
 478 005a 00C0      		rjmp .L51
 479 005c 00C0      		rjmp .L59
 480               	.LVL59:
 481               	.L58:
 175:tmk_core/common/mousekey.c ****         mouse_report.v = 0;
 176:tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_LEFT && mouse_report.h < 0)
 482               		.loc 1 176 0 is_stmt 1
 483 005e 8B3F      		cpi r24,lo8(-5)
 484 0060 01F4      		brne .L60
 485               		.loc 1 176 0 is_stmt 0 discriminator 1
 486 0062 8091 0000 		lds r24,mouse_report+5
 487               	.LVL60:
 488 0066 87FF      		sbrs r24,7
 489 0068 00C0      		rjmp .L51
 490               	.L62:
 177:tmk_core/common/mousekey.c ****         mouse_report.h = 0;
 491               		.loc 1 177 0 is_stmt 1
 492 006a 1092 0000 		sts mouse_report+5,__zero_reg__
 493 006e 00C0      		rjmp .L51
 494               	.LVL61:
 495               	.L60:
 178:tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_RIGHT && mouse_report.h > 0)
 496               		.loc 1 178 0
 497 0070 8C3F      		cpi r24,lo8(-4)
 498 0072 01F4      		brne .L61
 499               		.loc 1 178 0 is_stmt 0 discriminator 1
 500 0074 8091 0000 		lds r24,mouse_report+5
 501               	.LVL62:
 502 0078 1816      		cp __zero_reg__,r24
 503 007a 04F0      		brlt .L62
 504 007c 00C0      		rjmp .L51
 505               	.LVL63:
 506               	.L61:
 179:tmk_core/common/mousekey.c ****         mouse_report.h = 0;
 180:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN1)
 507               		.loc 1 180 0 is_stmt 1
 508 007e 843F      		cpi r24,lo8(-12)
 509 0080 01F4      		brne .L63
 181:tmk_core/common/mousekey.c ****         mouse_report.buttons &= ~MOUSE_BTN1;
 510               		.loc 1 181 0
 511 0082 8091 0000 		lds r24,mouse_report+1
 512               	.LVL64:
 513 0086 8E7F      		andi r24,lo8(-2)
 514 0088 00C0      		rjmp .L72
 515               	.LVL65:
 516               	.L63:
 182:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN2)
 517               		.loc 1 182 0
 518 008a 853F      		cpi r24,lo8(-11)
 519 008c 01F4      		brne .L64
 183:tmk_core/common/mousekey.c ****         mouse_report.buttons &= ~MOUSE_BTN2;
 520               		.loc 1 183 0
 521 008e 8091 0000 		lds r24,mouse_report+1
 522               	.LVL66:
 523 0092 8D7F      		andi r24,lo8(-3)
 524 0094 00C0      		rjmp .L72
 525               	.LVL67:
 526               	.L64:
 184:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN3)
 527               		.loc 1 184 0
 528 0096 863F      		cpi r24,lo8(-10)
 529 0098 01F4      		brne .L65
 185:tmk_core/common/mousekey.c ****         mouse_report.buttons &= ~MOUSE_BTN3;
 530               		.loc 1 185 0
 531 009a 8091 0000 		lds r24,mouse_report+1
 532               	.LVL68:
 533 009e 8B7F      		andi r24,lo8(-5)
 534 00a0 00C0      		rjmp .L72
 535               	.LVL69:
 536               	.L65:
 186:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN4)
 537               		.loc 1 186 0
 538 00a2 873F      		cpi r24,lo8(-9)
 539 00a4 01F4      		brne .L66
 187:tmk_core/common/mousekey.c ****         mouse_report.buttons &= ~MOUSE_BTN4;
 540               		.loc 1 187 0
 541 00a6 8091 0000 		lds r24,mouse_report+1
 542               	.LVL70:
 543 00aa 877F      		andi r24,lo8(-9)
 544 00ac 00C0      		rjmp .L72
 545               	.LVL71:
 546               	.L66:
 188:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN5)
 547               		.loc 1 188 0
 548 00ae 883F      		cpi r24,lo8(-8)
 549 00b0 01F4      		brne .L67
 189:tmk_core/common/mousekey.c ****         mouse_report.buttons &= ~MOUSE_BTN5;
 550               		.loc 1 189 0
 551 00b2 8091 0000 		lds r24,mouse_report+1
 552               	.LVL72:
 553 00b6 8F7E      		andi r24,lo8(-17)
 554               	.L72:
 555 00b8 8093 0000 		sts mouse_report+1,r24
 556 00bc 00C0      		rjmp .L51
 557               	.LVL73:
 558               	.L67:
 190:tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL0)
 559               		.loc 1 190 0
 560 00be 8D3F      		cpi r24,lo8(-3)
 561 00c0 01F4      		brne .L68
 191:tmk_core/common/mousekey.c ****         mousekey_accel &= ~(1 << 0);
 562               		.loc 1 191 0
 563 00c2 8091 0000 		lds r24,mousekey_accel
 564               	.LVL74:
 565 00c6 8E7F      		andi r24,lo8(-2)
 566 00c8 00C0      		rjmp .L71
 567               	.LVL75:
 568               	.L68:
 192:tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL1)
 569               		.loc 1 192 0
 570 00ca 8E3F      		cpi r24,lo8(-2)
 571 00cc 01F4      		brne .L69
 193:tmk_core/common/mousekey.c ****         mousekey_accel &= ~(1 << 1);
 572               		.loc 1 193 0
 573 00ce 8091 0000 		lds r24,mousekey_accel
 574               	.LVL76:
 575 00d2 8D7F      		andi r24,lo8(-3)
 576 00d4 00C0      		rjmp .L71
 577               	.LVL77:
 578               	.L69:
 194:tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL2)
 579               		.loc 1 194 0
 580 00d6 8F3F      		cpi r24,lo8(-1)
 581 00d8 01F4      		brne .L51
 195:tmk_core/common/mousekey.c ****         mousekey_accel &= ~(1 << 2);
 582               		.loc 1 195 0
 583 00da 8091 0000 		lds r24,mousekey_accel
 584               	.LVL78:
 585 00de 8B7F      		andi r24,lo8(-5)
 586               	.L71:
 587 00e0 8093 0000 		sts mousekey_accel,r24
 588               	.L51:
 196:tmk_core/common/mousekey.c ****     if (mouse_report.x == 0 && mouse_report.y == 0 && mouse_report.v == 0 && mouse_report.h == 0) m
 589               		.loc 1 196 0
 590 00e4 8091 0000 		lds r24,mouse_report+2
 591 00e8 8111      		cpse r24,__zero_reg__
 592 00ea 00C0      		rjmp .L49
 593               		.loc 1 196 0 is_stmt 0 discriminator 1
 594 00ec 8091 0000 		lds r24,mouse_report+3
 595 00f0 8111      		cpse r24,__zero_reg__
 596 00f2 00C0      		rjmp .L49
 597               		.loc 1 196 0 discriminator 2
 598 00f4 8091 0000 		lds r24,mouse_report+4
 599 00f8 8111      		cpse r24,__zero_reg__
 600 00fa 00C0      		rjmp .L49
 601               		.loc 1 196 0 discriminator 3
 602 00fc 8091 0000 		lds r24,mouse_report+5
 603 0100 8111      		cpse r24,__zero_reg__
 604 0102 00C0      		rjmp .L49
 605               		.loc 1 196 0 discriminator 4
 606 0104 1092 0000 		sts mousekey_repeat,__zero_reg__
 607               	.L49:
 608 0108 0895      		ret
 609               		.cfi_endproc
 610               	.LFE7:
 612               		.section	.text.mousekey_send,"ax",@progbits
 613               	.global	mousekey_send
 615               	mousekey_send:
 616               	.LFB8:
 197:tmk_core/common/mousekey.c **** }
 198:tmk_core/common/mousekey.c **** 
 199:tmk_core/common/mousekey.c **** #else /* #ifndef MK_3_SPEED */
 200:tmk_core/common/mousekey.c **** 
 201:tmk_core/common/mousekey.c **** enum { mkspd_unmod, mkspd_0, mkspd_1, mkspd_2, mkspd_COUNT };
 202:tmk_core/common/mousekey.c **** #    ifndef MK_MOMENTARY_ACCEL
 203:tmk_core/common/mousekey.c **** static uint8_t  mk_speed                 = mkspd_1;
 204:tmk_core/common/mousekey.c **** #    else
 205:tmk_core/common/mousekey.c **** static uint8_t mk_speed      = mkspd_unmod;
 206:tmk_core/common/mousekey.c **** static uint8_t mkspd_DEFAULT = mkspd_unmod;
 207:tmk_core/common/mousekey.c **** #    endif
 208:tmk_core/common/mousekey.c **** static uint16_t last_timer_c             = 0;
 209:tmk_core/common/mousekey.c **** static uint16_t last_timer_w             = 0;
 210:tmk_core/common/mousekey.c **** uint16_t        c_offsets[mkspd_COUNT]   = {MK_C_OFFSET_UNMOD, MK_C_OFFSET_0, MK_C_OFFSET_1, MK_C_O
 211:tmk_core/common/mousekey.c **** uint16_t        c_intervals[mkspd_COUNT] = {MK_C_INTERVAL_UNMOD, MK_C_INTERVAL_0, MK_C_INTERVAL_1, 
 212:tmk_core/common/mousekey.c **** uint16_t        w_offsets[mkspd_COUNT]   = {MK_W_OFFSET_UNMOD, MK_W_OFFSET_0, MK_W_OFFSET_1, MK_W_O
 213:tmk_core/common/mousekey.c **** uint16_t        w_intervals[mkspd_COUNT] = {MK_W_INTERVAL_UNMOD, MK_W_INTERVAL_0, MK_W_INTERVAL_1, 
 214:tmk_core/common/mousekey.c **** 
 215:tmk_core/common/mousekey.c **** void mousekey_task(void) {
 216:tmk_core/common/mousekey.c ****     // report cursor and scroll movement independently
 217:tmk_core/common/mousekey.c ****     report_mouse_t const tmpmr = mouse_report;
 218:tmk_core/common/mousekey.c ****     if ((mouse_report.x || mouse_report.y) && timer_elapsed(last_timer_c) > c_intervals[mk_speed]) 
 219:tmk_core/common/mousekey.c ****         mouse_report.h = 0;
 220:tmk_core/common/mousekey.c ****         mouse_report.v = 0;
 221:tmk_core/common/mousekey.c ****         mousekey_send();
 222:tmk_core/common/mousekey.c ****         last_timer_c = last_timer;
 223:tmk_core/common/mousekey.c ****         mouse_report = tmpmr;
 224:tmk_core/common/mousekey.c ****     }
 225:tmk_core/common/mousekey.c ****     if ((mouse_report.h || mouse_report.v) && timer_elapsed(last_timer_w) > w_intervals[mk_speed]) 
 226:tmk_core/common/mousekey.c ****         mouse_report.x = 0;
 227:tmk_core/common/mousekey.c ****         mouse_report.y = 0;
 228:tmk_core/common/mousekey.c ****         mousekey_send();
 229:tmk_core/common/mousekey.c ****         last_timer_w = last_timer;
 230:tmk_core/common/mousekey.c ****         mouse_report = tmpmr;
 231:tmk_core/common/mousekey.c ****     }
 232:tmk_core/common/mousekey.c **** }
 233:tmk_core/common/mousekey.c **** 
 234:tmk_core/common/mousekey.c **** void adjust_speed(void) {
 235:tmk_core/common/mousekey.c ****     uint16_t const c_offset = c_offsets[mk_speed];
 236:tmk_core/common/mousekey.c ****     uint16_t const w_offset = w_offsets[mk_speed];
 237:tmk_core/common/mousekey.c ****     if (mouse_report.x > 0) mouse_report.x = c_offset;
 238:tmk_core/common/mousekey.c ****     if (mouse_report.x < 0) mouse_report.x = c_offset * -1;
 239:tmk_core/common/mousekey.c ****     if (mouse_report.y > 0) mouse_report.y = c_offset;
 240:tmk_core/common/mousekey.c ****     if (mouse_report.y < 0) mouse_report.y = c_offset * -1;
 241:tmk_core/common/mousekey.c ****     if (mouse_report.h > 0) mouse_report.h = w_offset;
 242:tmk_core/common/mousekey.c ****     if (mouse_report.h < 0) mouse_report.h = w_offset * -1;
 243:tmk_core/common/mousekey.c ****     if (mouse_report.v > 0) mouse_report.v = w_offset;
 244:tmk_core/common/mousekey.c ****     if (mouse_report.v < 0) mouse_report.v = w_offset * -1;
 245:tmk_core/common/mousekey.c ****     // adjust for diagonals
 246:tmk_core/common/mousekey.c ****     if (mouse_report.x && mouse_report.y) {
 247:tmk_core/common/mousekey.c ****         mouse_report.x = times_inv_sqrt2(mouse_report.x);
 248:tmk_core/common/mousekey.c ****         if (mouse_report.x == 0) {
 249:tmk_core/common/mousekey.c ****             mouse_report.x = 1;
 250:tmk_core/common/mousekey.c ****         }
 251:tmk_core/common/mousekey.c ****         mouse_report.y = times_inv_sqrt2(mouse_report.y);
 252:tmk_core/common/mousekey.c ****         if (mouse_report.y == 0) {
 253:tmk_core/common/mousekey.c ****             mouse_report.y = 1;
 254:tmk_core/common/mousekey.c ****         }
 255:tmk_core/common/mousekey.c ****     }
 256:tmk_core/common/mousekey.c ****     if (mouse_report.h && mouse_report.v) {
 257:tmk_core/common/mousekey.c ****         mouse_report.h = times_inv_sqrt2(mouse_report.h);
 258:tmk_core/common/mousekey.c ****         mouse_report.v = times_inv_sqrt2(mouse_report.v);
 259:tmk_core/common/mousekey.c ****     }
 260:tmk_core/common/mousekey.c **** }
 261:tmk_core/common/mousekey.c **** 
 262:tmk_core/common/mousekey.c **** void mousekey_on(uint8_t code) {
 263:tmk_core/common/mousekey.c ****     uint16_t const c_offset  = c_offsets[mk_speed];
 264:tmk_core/common/mousekey.c ****     uint16_t const w_offset  = w_offsets[mk_speed];
 265:tmk_core/common/mousekey.c ****     uint8_t const  old_speed = mk_speed;
 266:tmk_core/common/mousekey.c ****     if (code == KC_MS_UP)
 267:tmk_core/common/mousekey.c ****         mouse_report.y = c_offset * -1;
 268:tmk_core/common/mousekey.c ****     else if (code == KC_MS_DOWN)
 269:tmk_core/common/mousekey.c ****         mouse_report.y = c_offset;
 270:tmk_core/common/mousekey.c ****     else if (code == KC_MS_LEFT)
 271:tmk_core/common/mousekey.c ****         mouse_report.x = c_offset * -1;
 272:tmk_core/common/mousekey.c ****     else if (code == KC_MS_RIGHT)
 273:tmk_core/common/mousekey.c ****         mouse_report.x = c_offset;
 274:tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_UP)
 275:tmk_core/common/mousekey.c ****         mouse_report.v = w_offset;
 276:tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_DOWN)
 277:tmk_core/common/mousekey.c ****         mouse_report.v = w_offset * -1;
 278:tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_LEFT)
 279:tmk_core/common/mousekey.c ****         mouse_report.h = w_offset * -1;
 280:tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_RIGHT)
 281:tmk_core/common/mousekey.c ****         mouse_report.h = w_offset;
 282:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN1)
 283:tmk_core/common/mousekey.c ****         mouse_report.buttons |= MOUSE_BTN1;
 284:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN2)
 285:tmk_core/common/mousekey.c ****         mouse_report.buttons |= MOUSE_BTN2;
 286:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN3)
 287:tmk_core/common/mousekey.c ****         mouse_report.buttons |= MOUSE_BTN3;
 288:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN4)
 289:tmk_core/common/mousekey.c ****         mouse_report.buttons |= MOUSE_BTN4;
 290:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN5)
 291:tmk_core/common/mousekey.c ****         mouse_report.buttons |= MOUSE_BTN5;
 292:tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL0)
 293:tmk_core/common/mousekey.c ****         mk_speed = mkspd_0;
 294:tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL1)
 295:tmk_core/common/mousekey.c ****         mk_speed = mkspd_1;
 296:tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL2)
 297:tmk_core/common/mousekey.c ****         mk_speed = mkspd_2;
 298:tmk_core/common/mousekey.c ****     if (mk_speed != old_speed) adjust_speed();
 299:tmk_core/common/mousekey.c **** }
 300:tmk_core/common/mousekey.c **** 
 301:tmk_core/common/mousekey.c **** void mousekey_off(uint8_t code) {
 302:tmk_core/common/mousekey.c **** #    ifdef MK_MOMENTARY_ACCEL
 303:tmk_core/common/mousekey.c ****     uint8_t const old_speed = mk_speed;
 304:tmk_core/common/mousekey.c **** #    endif
 305:tmk_core/common/mousekey.c ****     if (code == KC_MS_UP && mouse_report.y < 0)
 306:tmk_core/common/mousekey.c ****         mouse_report.y = 0;
 307:tmk_core/common/mousekey.c ****     else if (code == KC_MS_DOWN && mouse_report.y > 0)
 308:tmk_core/common/mousekey.c ****         mouse_report.y = 0;
 309:tmk_core/common/mousekey.c ****     else if (code == KC_MS_LEFT && mouse_report.x < 0)
 310:tmk_core/common/mousekey.c ****         mouse_report.x = 0;
 311:tmk_core/common/mousekey.c ****     else if (code == KC_MS_RIGHT && mouse_report.x > 0)
 312:tmk_core/common/mousekey.c ****         mouse_report.x = 0;
 313:tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_UP && mouse_report.v > 0)
 314:tmk_core/common/mousekey.c ****         mouse_report.v = 0;
 315:tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_DOWN && mouse_report.v < 0)
 316:tmk_core/common/mousekey.c ****         mouse_report.v = 0;
 317:tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_LEFT && mouse_report.h < 0)
 318:tmk_core/common/mousekey.c ****         mouse_report.h = 0;
 319:tmk_core/common/mousekey.c ****     else if (code == KC_MS_WH_RIGHT && mouse_report.h > 0)
 320:tmk_core/common/mousekey.c ****         mouse_report.h = 0;
 321:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN1)
 322:tmk_core/common/mousekey.c ****         mouse_report.buttons &= ~MOUSE_BTN1;
 323:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN2)
 324:tmk_core/common/mousekey.c ****         mouse_report.buttons &= ~MOUSE_BTN2;
 325:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN3)
 326:tmk_core/common/mousekey.c ****         mouse_report.buttons &= ~MOUSE_BTN3;
 327:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN4)
 328:tmk_core/common/mousekey.c ****         mouse_report.buttons &= ~MOUSE_BTN4;
 329:tmk_core/common/mousekey.c ****     else if (code == KC_MS_BTN5)
 330:tmk_core/common/mousekey.c ****         mouse_report.buttons &= ~MOUSE_BTN5;
 331:tmk_core/common/mousekey.c **** #    ifdef MK_MOMENTARY_ACCEL
 332:tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL0)
 333:tmk_core/common/mousekey.c ****         mk_speed = mkspd_DEFAULT;
 334:tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL1)
 335:tmk_core/common/mousekey.c ****         mk_speed = mkspd_DEFAULT;
 336:tmk_core/common/mousekey.c ****     else if (code == KC_MS_ACCEL2)
 337:tmk_core/common/mousekey.c ****         mk_speed = mkspd_DEFAULT;
 338:tmk_core/common/mousekey.c ****     if (mk_speed != old_speed) adjust_speed();
 339:tmk_core/common/mousekey.c **** #    endif
 340:tmk_core/common/mousekey.c **** }
 341:tmk_core/common/mousekey.c **** 
 342:tmk_core/common/mousekey.c **** #endif /* #ifndef MK_3_SPEED */
 343:tmk_core/common/mousekey.c **** 
 344:tmk_core/common/mousekey.c **** void mousekey_send(void) {
 617               		.loc 1 344 0 is_stmt 1
 618               		.cfi_startproc
 619               	/* prologue: function */
 620               	/* frame size = 0 */
 621               	/* stack size = 0 */
 622               	.L__stack_usage = 0
 345:tmk_core/common/mousekey.c ****     mousekey_debug();
 346:tmk_core/common/mousekey.c ****     host_mouse_send(&mouse_report);
 623               		.loc 1 346 0
 624 0000 80E0      		ldi r24,lo8(mouse_report)
 625 0002 90E0      		ldi r25,hi8(mouse_report)
 626 0004 0E94 0000 		call host_mouse_send
 627               	.LVL79:
 347:tmk_core/common/mousekey.c ****     last_timer = timer_read();
 628               		.loc 1 347 0
 629 0008 0E94 0000 		call timer_read
 630               	.LVL80:
 631 000c 9093 0000 		sts last_timer+1,r25
 632 0010 8093 0000 		sts last_timer,r24
 633 0014 0895      		ret
 634               		.cfi_endproc
 635               	.LFE8:
 637               		.section	.text.mousekey_task,"ax",@progbits
 638               	.global	mousekey_task
 640               	mousekey_task:
 641               	.LFB5:
  98:tmk_core/common/mousekey.c ****     if (timer_elapsed(last_timer) < (mousekey_repeat ? mk_interval : mk_delay * 10)) {
 642               		.loc 1 98 0
 643               		.cfi_startproc
 644 0000 1F93      		push r17
 645               	.LCFI0:
 646               		.cfi_def_cfa_offset 3
 647               		.cfi_offset 17, -2
 648 0002 CF93      		push r28
 649               	.LCFI1:
 650               		.cfi_def_cfa_offset 4
 651               		.cfi_offset 28, -3
 652 0004 DF93      		push r29
 653               	.LCFI2:
 654               		.cfi_def_cfa_offset 5
 655               		.cfi_offset 29, -4
 656               	/* prologue: function */
 657               	/* frame size = 0 */
 658               	/* stack size = 3 */
 659               	.L__stack_usage = 3
  99:tmk_core/common/mousekey.c ****         return;
 660               		.loc 1 99 0
 661 0006 8091 0000 		lds r24,last_timer
 662 000a 9091 0000 		lds r25,last_timer+1
 663 000e 0E94 0000 		call timer_elapsed
 664               	.LVL81:
 665 0012 AC01      		movw r20,r24
 666 0014 9091 0000 		lds r25,mousekey_repeat
 667 0018 9923      		tst r25
 668 001a 01F0      		breq .L75
  99:tmk_core/common/mousekey.c ****         return;
 669               		.loc 1 99 0 is_stmt 0 discriminator 1
 670 001c 2091 0000 		lds r18,mk_interval
 671 0020 30E0      		ldi r19,0
 672 0022 00C0      		rjmp .L76
 673               	.L75:
  99:tmk_core/common/mousekey.c ****         return;
 674               		.loc 1 99 0 discriminator 2
 675 0024 2091 0000 		lds r18,mk_delay
 676 0028 8AE0      		ldi r24,lo8(10)
 677 002a 289F      		mul r18,r24
 678 002c 9001      		movw r18,r0
 679 002e 1124      		clr __zero_reg__
 680               	.L76:
  99:tmk_core/common/mousekey.c ****         return;
 681               		.loc 1 99 0 discriminator 4
 682 0030 4217      		cp r20,r18
 683 0032 5307      		cpc r21,r19
 684 0034 00F4      		brsh .+2
 685 0036 00C0      		rjmp .L74
 102:tmk_core/common/mousekey.c ****         return;
 686               		.loc 1 102 0 is_stmt 1
 687 0038 8091 0000 		lds r24,mouse_report+2
 688 003c C091 0000 		lds r28,mouse_report+3
 689 0040 D091 0000 		lds r29,mouse_report+4
 690 0044 1091 0000 		lds r17,mouse_report+5
 691 0048 8111      		cpse r24,__zero_reg__
 692 004a 00C0      		rjmp .L78
 102:tmk_core/common/mousekey.c ****         return;
 693               		.loc 1 102 0 is_stmt 0 discriminator 1
 694 004c C111      		cpse r28,__zero_reg__
 695 004e 00C0      		rjmp .L79
 102:tmk_core/common/mousekey.c ****         return;
 696               		.loc 1 102 0 discriminator 2
 697 0050 D111      		cpse r29,__zero_reg__
 698 0052 00C0      		rjmp .L79
 102:tmk_core/common/mousekey.c ****         return;
 699               		.loc 1 102 0 discriminator 3
 700 0054 1111      		cpse r17,__zero_reg__
 701 0056 00C0      		rjmp .L79
 702 0058 00C0      		rjmp .L74
 703               	.L78:
 105:tmk_core/common/mousekey.c ****     if (mouse_report.x > 0) mouse_report.x = move_unit();
 704               		.loc 1 105 0 is_stmt 1
 705 005a 9F3F      		cpi r25,lo8(-1)
 706 005c 01F0      		breq .L80
 707               	.L96:
 105:tmk_core/common/mousekey.c ****     if (mouse_report.x > 0) mouse_report.x = move_unit();
 708               		.loc 1 105 0 is_stmt 0 discriminator 1
 709 005e 9F5F      		subi r25,lo8(-(1))
 710 0060 9093 0000 		sts mousekey_repeat,r25
 711               	.L80:
 106:tmk_core/common/mousekey.c ****     if (mouse_report.x < 0) mouse_report.x = move_unit() * -1;
 712               		.loc 1 106 0 is_stmt 1
 713 0064 1816      		cp __zero_reg__,r24
 714 0066 04F4      		brge .L82
 106:tmk_core/common/mousekey.c ****     if (mouse_report.x < 0) mouse_report.x = move_unit() * -1;
 715               		.loc 1 106 0 is_stmt 0 discriminator 1
 716 0068 0E94 0000 		call move_unit
 717               	.LVL82:
 718 006c 8093 0000 		sts mouse_report+2,r24
 719               	.L82:
 107:tmk_core/common/mousekey.c ****     if (mouse_report.y > 0) mouse_report.y = move_unit();
 720               		.loc 1 107 0 is_stmt 1
 721 0070 8091 0000 		lds r24,mouse_report+2
 722 0074 87FF      		sbrs r24,7
 723 0076 00C0      		rjmp .L83
 107:tmk_core/common/mousekey.c ****     if (mouse_report.y > 0) mouse_report.y = move_unit();
 724               		.loc 1 107 0 is_stmt 0 discriminator 1
 725 0078 0E94 0000 		call move_unit
 726               	.LVL83:
 727 007c 8195      		neg r24
 728 007e 8093 0000 		sts mouse_report+2,r24
 729               	.L83:
 108:tmk_core/common/mousekey.c ****     if (mouse_report.y < 0) mouse_report.y = move_unit() * -1;
 730               		.loc 1 108 0 is_stmt 1
 731 0082 1C16      		cp __zero_reg__,r28
 732 0084 04F4      		brge .L84
 108:tmk_core/common/mousekey.c ****     if (mouse_report.y < 0) mouse_report.y = move_unit() * -1;
 733               		.loc 1 108 0 is_stmt 0 discriminator 1
 734 0086 0E94 0000 		call move_unit
 735               	.LVL84:
 736 008a 8093 0000 		sts mouse_report+3,r24
 737               	.L84:
 109:tmk_core/common/mousekey.c ****     /* diagonal move [1/sqrt(2)] */
 738               		.loc 1 109 0 is_stmt 1
 739 008e 8091 0000 		lds r24,mouse_report+3
 740 0092 87FF      		sbrs r24,7
 741 0094 00C0      		rjmp .L85
 109:tmk_core/common/mousekey.c ****     /* diagonal move [1/sqrt(2)] */
 742               		.loc 1 109 0 is_stmt 0 discriminator 1
 743 0096 0E94 0000 		call move_unit
 744               	.LVL85:
 745 009a 8195      		neg r24
 746 009c 8093 0000 		sts mouse_report+3,r24
 747               	.L85:
 111:tmk_core/common/mousekey.c ****         mouse_report.x = times_inv_sqrt2(mouse_report.x);
 748               		.loc 1 111 0 is_stmt 1
 749 00a0 3091 0000 		lds r19,mouse_report+2
 750 00a4 3323      		tst r19
 751 00a6 01F0      		breq .L87
 111:tmk_core/common/mousekey.c ****         mouse_report.x = times_inv_sqrt2(mouse_report.x);
 752               		.loc 1 111 0 is_stmt 0 discriminator 1
 753 00a8 2091 0000 		lds r18,mouse_report+3
 754 00ac 2223      		tst r18
 755 00ae 01F0      		breq .L87
 756               	.LVL86:
 757               	.LBB6:
 758               	.LBB7:
  31:tmk_core/common/mousekey.c **** }
 759               		.loc 1 31 0 is_stmt 1
 760 00b0 45EB      		ldi r20,lo8(-75)
 761 00b2 3403      		mulsu r19,r20
 762 00b4 C001      		movw r24,r0
 763 00b6 1124      		clr __zero_reg__
 764 00b8 892F      		mov r24,r25
 765 00ba 990F      		lsl r25
 766 00bc 990B      		sbc r25,r25
 767               	.LVL87:
 768               	.LBE7:
 769               	.LBE6:
 113:tmk_core/common/mousekey.c ****             mouse_report.x = 1;
 770               		.loc 1 113 0
 771 00be 0097      		sbiw r24,0
 772 00c0 01F4      		brne .L107
 114:tmk_core/common/mousekey.c ****         }
 773               		.loc 1 114 0
 774 00c2 81E0      		ldi r24,lo8(1)
 775               	.L107:
 776 00c4 8093 0000 		sts mouse_report+2,r24
 777               	.LVL88:
 778               	.LBB8:
 779               	.LBB9:
  31:tmk_core/common/mousekey.c **** }
 780               		.loc 1 31 0
 781 00c8 35EB      		ldi r19,lo8(-75)
 782 00ca 2303      		mulsu r18,r19
 783 00cc C001      		movw r24,r0
 784 00ce 1124      		clr __zero_reg__
 785 00d0 892F      		mov r24,r25
 786 00d2 990F      		lsl r25
 787 00d4 990B      		sbc r25,r25
 788               	.LVL89:
 789               	.LBE9:
 790               	.LBE8:
 117:tmk_core/common/mousekey.c ****             mouse_report.y = 1;
 791               		.loc 1 117 0
 792 00d6 0097      		sbiw r24,0
 793 00d8 01F4      		brne .L108
 118:tmk_core/common/mousekey.c ****         }
 794               		.loc 1 118 0
 795 00da 81E0      		ldi r24,lo8(1)
 796               	.L108:
 797 00dc 8093 0000 		sts mouse_report+3,r24
 798               	.LVL90:
 799               	.L87:
 121:tmk_core/common/mousekey.c ****     if (mouse_report.v < 0) mouse_report.v = wheel_unit() * -1;
 800               		.loc 1 121 0
 801 00e0 1D16      		cp __zero_reg__,r29
 802 00e2 04F4      		brge .L92
 121:tmk_core/common/mousekey.c ****     if (mouse_report.v < 0) mouse_report.v = wheel_unit() * -1;
 803               		.loc 1 121 0 is_stmt 0 discriminator 1
 804 00e4 0E94 0000 		call wheel_unit
 805               	.LVL91:
 806 00e8 8093 0000 		sts mouse_report+4,r24
 807               	.L92:
 122:tmk_core/common/mousekey.c ****     if (mouse_report.h > 0) mouse_report.h = wheel_unit();
 808               		.loc 1 122 0 is_stmt 1
 809 00ec 8091 0000 		lds r24,mouse_report+4
 810 00f0 87FF      		sbrs r24,7
 811 00f2 00C0      		rjmp .L93
 122:tmk_core/common/mousekey.c ****     if (mouse_report.h > 0) mouse_report.h = wheel_unit();
 812               		.loc 1 122 0 is_stmt 0 discriminator 1
 813 00f4 0E94 0000 		call wheel_unit
 814               	.LVL92:
 815 00f8 8195      		neg r24
 816 00fa 8093 0000 		sts mouse_report+4,r24
 817               	.L93:
 123:tmk_core/common/mousekey.c ****     if (mouse_report.h < 0) mouse_report.h = wheel_unit() * -1;
 818               		.loc 1 123 0 is_stmt 1
 819 00fe 1116      		cp __zero_reg__,r17
 820 0100 04F4      		brge .L94
 123:tmk_core/common/mousekey.c ****     if (mouse_report.h < 0) mouse_report.h = wheel_unit() * -1;
 821               		.loc 1 123 0 is_stmt 0 discriminator 1
 822 0102 0E94 0000 		call wheel_unit
 823               	.LVL93:
 824 0106 8093 0000 		sts mouse_report+5,r24
 825               	.L94:
 124:tmk_core/common/mousekey.c ****     mousekey_send();
 826               		.loc 1 124 0 is_stmt 1
 827 010a 8091 0000 		lds r24,mouse_report+5
 828 010e 87FF      		sbrs r24,7
 829 0110 00C0      		rjmp .L95
 124:tmk_core/common/mousekey.c ****     mousekey_send();
 830               		.loc 1 124 0 is_stmt 0 discriminator 1
 831 0112 0E94 0000 		call wheel_unit
 832               	.LVL94:
 833 0116 8195      		neg r24
 834 0118 8093 0000 		sts mouse_report+5,r24
 835               	.L95:
 836               	/* epilogue start */
 126:tmk_core/common/mousekey.c **** 
 837               		.loc 1 126 0 is_stmt 1
 838 011c DF91      		pop r29
 839 011e CF91      		pop r28
 840 0120 1F91      		pop r17
 125:tmk_core/common/mousekey.c **** }
 841               		.loc 1 125 0
 842 0122 0C94 0000 		jmp mousekey_send
 843               	.LVL95:
 844               	.L79:
 105:tmk_core/common/mousekey.c ****     if (mouse_report.x > 0) mouse_report.x = move_unit();
 845               		.loc 1 105 0
 846 0126 9F3F      		cpi r25,lo8(-1)
 847 0128 01F0      		breq .+2
 848 012a 00C0      		rjmp .L96
 849 012c 00C0      		rjmp .L82
 850               	.L74:
 851               	/* epilogue start */
 126:tmk_core/common/mousekey.c **** 
 852               		.loc 1 126 0
 853 012e DF91      		pop r29
 854 0130 CF91      		pop r28
 855 0132 1F91      		pop r17
 856 0134 0895      		ret
 857               		.cfi_endproc
 858               	.LFE5:
 860               		.section	.text.mousekey_clear,"ax",@progbits
 861               	.global	mousekey_clear
 863               	mousekey_clear:
 864               	.LFB9:
 348:tmk_core/common/mousekey.c **** }
 349:tmk_core/common/mousekey.c **** 
 350:tmk_core/common/mousekey.c **** void mousekey_clear(void) {
 865               		.loc 1 350 0
 866               		.cfi_startproc
 867               	/* prologue: function */
 868               	/* frame size = 0 */
 869               	/* stack size = 0 */
 870               	.L__stack_usage = 0
 351:tmk_core/common/mousekey.c ****     mouse_report    = (report_mouse_t){};
 871               		.loc 1 351 0
 872 0000 E0E0      		ldi r30,lo8(mouse_report)
 873 0002 F0E0      		ldi r31,hi8(mouse_report)
 874 0004 86E0      		ldi r24,lo8(6)
 875 0006 DF01      		movw r26,r30
 876               		0:
 877 0008 1D92      		st X+,__zero_reg__
 878 000a 8A95      		dec r24
 879 000c 01F4      		brne 0b
 352:tmk_core/common/mousekey.c ****     mousekey_repeat = 0;
 880               		.loc 1 352 0
 881 000e 1092 0000 		sts mousekey_repeat,__zero_reg__
 353:tmk_core/common/mousekey.c ****     mousekey_accel  = 0;
 882               		.loc 1 353 0
 883 0012 1092 0000 		sts mousekey_accel,__zero_reg__
 884 0016 0895      		ret
 885               		.cfi_endproc
 886               	.LFE9:
 888               	.global	mk_wheel_time_to_max
 889               		.section	.data.mk_wheel_time_to_max,"aw",@progbits
 892               	mk_wheel_time_to_max:
 893 0000 28        		.byte	40
 894               	.global	mk_wheel_max_speed
 895               		.section	.data.mk_wheel_max_speed,"aw",@progbits
 898               	mk_wheel_max_speed:
 899 0000 08        		.byte	8
 900               	.global	mk_time_to_max
 901               		.section	.data.mk_time_to_max,"aw",@progbits
 904               	mk_time_to_max:
 905 0000 14        		.byte	20
 906               	.global	mk_max_speed
 907               		.section	.data.mk_max_speed,"aw",@progbits
 910               	mk_max_speed:
 911 0000 0A        		.byte	10
 912               	.global	mk_interval
 913               		.section	.data.mk_interval,"aw",@progbits
 916               	mk_interval:
 917 0000 32        		.byte	50
 918               	.global	mk_delay
 919               		.section	.data.mk_delay,"aw",@progbits
 922               	mk_delay:
 923 0000 1E        		.byte	30
 924               		.section	.bss.last_timer,"aw",@nobits
 927               	last_timer:
 928 0000 0000      		.zero	2
 929               		.section	.bss.mousekey_repeat,"aw",@nobits
 932               	mousekey_repeat:
 933 0000 00        		.zero	1
 934               		.section	.bss.mousekey_accel,"aw",@nobits
 937               	mousekey_accel:
 938 0000 00        		.zero	1
 939               		.section	.bss.mouse_report,"aw",@nobits
 942               	mouse_report:
 943 0000 0000 0000 		.zero	6
 943      0000 
 944               		.text
 945               	.Letext0:
 946               		.file 2 "/usr/lib/avr/include/stdint.h"
 947               		.file 3 "tmk_core/common/report.h"
 948               		.file 4 "tmk_core/common/debug.h"
 949               		.file 5 "tmk_core/common/host.h"
 950               		.file 6 "tmk_core/common/timer.h"
 951               		.file 7 "tmk_core/common/keycode.h"
DEFINED SYMBOLS
                            *ABS*:0000000000000000 mousekey.c
     /tmp/cczTUcNf.s:2      *ABS*:000000000000003e __SP_H__
     /tmp/cczTUcNf.s:3      *ABS*:000000000000003d __SP_L__
     /tmp/cczTUcNf.s:4      *ABS*:000000000000003f __SREG__
     /tmp/cczTUcNf.s:5      *ABS*:0000000000000000 __tmp_reg__
     /tmp/cczTUcNf.s:6      *ABS*:0000000000000001 __zero_reg__
     /tmp/cczTUcNf.s:12     .text.move_unit:0000000000000000 move_unit
     /tmp/cczTUcNf.s:937    .bss.mousekey_accel:0000000000000000 mousekey_accel
     /tmp/cczTUcNf.s:910    .data.mk_max_speed:0000000000000000 mk_max_speed
     /tmp/cczTUcNf.s:932    .bss.mousekey_repeat:0000000000000000 mousekey_repeat
     /tmp/cczTUcNf.s:904    .data.mk_time_to_max:0000000000000000 mk_time_to_max
     /tmp/cczTUcNf.s:124    .text.wheel_unit:0000000000000000 wheel_unit
     /tmp/cczTUcNf.s:898    .data.mk_wheel_max_speed:0000000000000000 mk_wheel_max_speed
     /tmp/cczTUcNf.s:892    .data.mk_wheel_time_to_max:0000000000000000 mk_wheel_time_to_max
     /tmp/cczTUcNf.s:220    .text.mousekey_on:0000000000000000 mousekey_on
     /tmp/cczTUcNf.s:942    .bss.mouse_report:0000000000000000 mouse_report
     /tmp/cczTUcNf.s:402    .text.mousekey_off:0000000000000000 mousekey_off
     /tmp/cczTUcNf.s:615    .text.mousekey_send:0000000000000000 mousekey_send
     /tmp/cczTUcNf.s:927    .bss.last_timer:0000000000000000 last_timer
     /tmp/cczTUcNf.s:640    .text.mousekey_task:0000000000000000 mousekey_task
     /tmp/cczTUcNf.s:916    .data.mk_interval:0000000000000000 mk_interval
     /tmp/cczTUcNf.s:922    .data.mk_delay:0000000000000000 mk_delay
     /tmp/cczTUcNf.s:863    .text.mousekey_clear:0000000000000000 mousekey_clear

UNDEFINED SYMBOLS
__divmodhi4
host_mouse_send
timer_read
timer_elapsed
__do_copy_data
__do_clear_bss
