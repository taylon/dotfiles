" Sanity
set nocompatible
set backspace=indent,eol,start
set history=1000
set wildmenu " Improved command line completion
set autoindent " Carry over indenting from previous line
set smarttab
set tabstop=2 " Make tabs as wide as two spaces
set shiftwidth=2
set expandtab
set autoread " Auto read files if it changes outside vim
set ignorecase
set smartcase
set hlsearch " Highlight the last used search pattern.
set incsearch " Highlight matched patterns as you type
set cursorline " Highlight current line
set ruler " Show the cursor position
set nowrap " Don't wrap lines
set number
set relativenumber
set scrolloff=3 " Start scrolling three lines before the horizontal window border

filetype plugin indent on

set clipboard=unnamedplus " Use the OS clipboard by default
if system("uname") == "Darwin"
  set clipboard=unnamed
endif

if has('syntax') && !exists('g:syntax_on')
  syntax enable
endif

if (has("termguicolors"))
  set termguicolors " Enable 24-bit (true-color) mode
endif

" Speed up viewport scrolling
nnoremap <C-e> 3<C-e>
nnoremap <C-y> 3<C-y>

" Map common commands to avoid typos
cab W w
cab Q q
cab Wq wq
cab wQ wq
cab WQ wq
cab Qa qa
cab Wqa wqa

" Centralize backups, swapfiles and undo history
set backupdir=~/.vim/.backups
set directory=~/.vim/.swaps
set undodir=~/.vim/.undo

" Set cursor colors per mode
let &t_SI = "\<Esc>[6 q"
let &t_SR = "\<Esc>[4 q"
let &t_EI = "\<Esc>[2 q"

" Plugins configuration

" ALE
let g:ale_linters_explicit = 1 " Only run linters named in ale_linters settings.
let g:ale_fix_on_save = 1
let g:ale_completion_enabled = 0

" vim-plug
call plug#begin('~/.vim/plugged')

Plug 'joshdick/onedark.vim'
Plug 'scrooloose/nerdcommenter'
Plug 'sheerun/vim-polyglot'
Plug 'tpope/vim-surround'
Plug 'tpope/vim-repeat'
Plug 'yggdroot/indentline'
Plug 'w0rp/ale'

call plug#end()

" Colorscheme
colorscheme onedark

" NERDCommenter
let g:NERDSpaceDelims = 1 " Add spaces after comment delimiters by default
let g:NERDDefaultAlign = 'left' " Align delimiters flush left instead of following code indentation

source ~/.vim/keybindings.vim
